<h2 id="overview">Overview</h2>

<p>This section details the procedure of installing Sunbird on your server. Sunbird software is containerized. The installation script uses the Docker swarm orchestration engine to run the Sunbird docker images. The Docker swarm consists of manager and agent nodes. The containers are run on the agent nodes and the manager nodes manage the container lifecycle.</p>

<p>All the stateless services in Sunbird - Portal, LMS Backend, API Gateway and Proxies - are run as docker containers inside the swarm. All stateful services consisting of Cassandra, PostgreSql, Elasticsearch and the OAuth service(Keycloak) are run on Virtual Machines (VMs) directly. The installation is automated using shell scripts and Ansible.</p>

<ul>
  <li>
    <p>The following table lists the services that are set up and run as part of installation. The table also lists the optimal server count for a typical staging or production environment with thousands of users.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: left">Server Name</th>
          <th style="text-align: left">Suggested Servers per Environment</th>
          <th style="text-align: left">Basic Requirement</th>
          <th style="text-align: left">Maximum Servers</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">Docker swarm manager<sup>1</sup></td>
          <td style="text-align: left">Staging - 1 <br /> Prod - 3</td>
          <td style="text-align: left">CPU: 1core &amp; RAM: 2GB</td>
          <td style="text-align: left">Any</td>
        </tr>
        <tr>
          <td style="text-align: left">Docker swarm  agent nodes<sup>1</sup></td>
          <td style="text-align: left">Staging - 1 <br /> Prod - 3</td>
          <td style="text-align: left">CPU: 2core &amp; RAM: 6GB</td>
          <td style="text-align: left">Any</td>
        </tr>
        <tr>
          <td style="text-align: left">Elasticsearch<sup>2</sup></td>
          <td style="text-align: left">Staging - 1 <br /> Prod- 3</td>
          <td style="text-align: left">CPU: 1core &amp; RAM: 3GB</td>
          <td style="text-align: left">Any</td>
        </tr>
        <tr>
          <td style="text-align: left">Postgres master<sup>2</sup></td>
          <td style="text-align: left">Staging&amp;Prod - 1</td>
          <td style="text-align: left">CPU: 1core &amp; RAM: 3GB</td>
          <td style="text-align: left">1</td>
        </tr>
        <tr>
          <td style="text-align: left">Postgres slave<sup>2</sup></td>
          <td style="text-align: left">Staging&amp;Prod - 1</td>
          <td style="text-align: left">CPU: 1core &amp; RAM: 3GB</td>
          <td style="text-align: left">1</td>
        </tr>
        <tr>
          <td style="text-align: left">Cassandra<sup>2</sup></td>
          <td style="text-align: left">Staging&amp;Prod - 1</td>
          <td style="text-align: left">CPU: 1core &amp; RAM: 3GB</td>
          <td style="text-align: left">1</td>
        </tr>
        <tr>
          <td style="text-align: left">Keycloak<sup>1</sup></td>
          <td style="text-align: left">Staging&amp;Prod - 1</td>
          <td style="text-align: left">CPU: 1core &amp; RAM: 4GB</td>
          <td style="text-align: left">Any</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<p>On installing Sunbird on 2 servers:
* All services with a common superscript (e.g. servername<sup>2</sup>) are run on the same server
* The App server runs services with superscript <sup>1</sup> and the DB server runs services with superscript <sup>2</sup></p>

<h2 id="supported-application-versions">Supported application versions</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Application</th>
      <th style="text-align: left">Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Docker</td>
      <td style="text-align: left">17.06, 18.03</td>
    </tr>
    <tr>
      <td style="text-align: left">Elasticsearch</td>
      <td style="text-align: left">5.4</td>
    </tr>
    <tr>
      <td style="text-align: left">Postgres</td>
      <td style="text-align: left">9.5</td>
    </tr>
    <tr>
      <td style="text-align: left">Cassandra</td>
      <td style="text-align: left">3.9</td>
    </tr>
  </tbody>
</table>

